@using Microsoft.EntityFrameworkCore;
@inject CRMDBContext _context

@{
    var planPrices = _context.Plans.ToList();
    var FirstPlan = _context.Plans.FirstOrDefault();
    var LastPlan = _context.Plans.OrderBy(a => a.PlanId).LastOrDefault();
    var locale = Context.Request.HttpContext.Features.Get<IRequestCultureFeature>();
    var BrowserCulture = locale.RequestCulture.UICulture.ToString();
}

<style>
    .plan-price {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
    }

    .original-price {
        font-size: 0.9em; /* Make the original price smaller */
       
        margin-right: 10px; /* Add some spacing */
    }

    .discounted-price {
        text-decoration: line-through; /* Add strikethrough */
        color: red; /* Set color to red */
        font-size: 1.2em; /* Make the discounted price slightly larger */
        font-weight: bold; /* Add bold to the discounted price */
    }


</style>
@{
    if (planPrices != null)
    {
        <div class="container" id="PlanPrices">
            <div class="row pt-4 mt-5">
                <div class="col-lg-12 text-center appear-animation animated fadeIn appear-animation-visible" data-appear-animation="fadeIn" data-appear-animation-delay="400" style="animation-delay: 400ms;">
                    <h2 class="font-weight-normal text-6 mb-5"><strong class="font-weight-extra-bold">@sharedResource["Our Prices"] </strong></h2>
                </div>
            </div>

            <div class="pricing-table mt-3 mb-5 pb-5" style="justify-content: center;">
                @{
                    if(planPrices != null)
                    {
                        @foreach (var item in planPrices)
                        {
                            <div class="col-12 col-lg-4 p-3">
                                <div class="plan">
                                @if (FirstPlan != null && FirstPlan.TitleEn == item.TitleEn)
                                    {
                                        <div class="plan-header" style="background-color:black;">

                                            @if (BrowserCulture == "en-US")
                                            {
                                                <h3>@FirstPlan.TitleEn</h3>
                                            }
                                            else
                                            {
                                                <h3>@FirstPlan.TitleAr</h3>
                                            }
                                        </div>
                                    }
                                @if (LastPlan != null && LastPlan.TitleEn == item.TitleEn)
                                    {
                                        <div class="plan-header" style="background-color:red;">

                                            @if (BrowserCulture == "en-US")
                                            {
                                                <h3>@LastPlan.TitleEn</h3>
                                            }
                                            else
                                            {
                                                <h3>@LastPlan.TitleAr</h3>
                                            }
                                        </div>
                                }
                               
                                    <div class="plan-price">
                                    
                                        @if (@item.PriceAfterDiscount > 0)
                                        {

                                            <span class="price">


                                                <span class="original-price">@item.PriceAfterDiscount</span>&nbsp;<span class="price-unit">@sharedResource["KD"]</span>
                                            </span>
                                            <span class="discounted-price">

                                                @item.Price &nbsp;                                                 <span class="price-unit">@sharedResource["KD"]</span>

                                            </span>


                                        }
                                        else
                                        {
                                            <span class="price">  @item.Price &nbsp;<span class="price-unit">@sharedResource["KD"]</span></span>

                                        }
                                        <label class="price-label">@sharedResource["PER YEAR"]</label>

                                    </div>
                                    <div class="plan-features">
                                        <ul>
                                            @if (FirstPlan != null && FirstPlan.TitleEn == item.TitleEn)
                                            {
                                                <li>@item.PagesCount @sharedResource["Web Pages"]</li>
                                                <li>@sharedResource["Edit Site Any Time"]</li>
                                                <li>@sharedResource["50 MB Space"]</li>
                                                <li>@sharedResource["Add Video"]</li>
                                                <li>@sharedResource["Add Links"]</li>
                                                <li>@sharedResource["Add Images"]</li>
                                                <li>@sharedResource["Add Custom Domain"]</li>

                                                <li>@sharedResource["SSL Certificate"]</li>
                                                <li>@sharedResource["Support One Year"]</li>
                                            }
                                            @if (LastPlan != null && LastPlan.TitleEn == item.TitleEn)
                                            {
                                                <li>@sharedResource["Unlimited Web Pages"]</li>
                                                <li>@sharedResource["Edit Site Any Time"]</li>
                                                <li>@sharedResource["Unlimited Storage"]</li>
                                                <li>@sharedResource["Add Video"]</li>
                                                <li>@sharedResource["Add Links"]</li>
                                                <li>@sharedResource["Add Images"]</li>
                                                <li>@sharedResource["Add Custom Domain"]</li>
                                                <li>@sharedResource["SSL Certificate"]</li>
                                                <li>@sharedResource["Support One Year"]</li>


                                            }

                                        </ul>
                                    </div>
                                    <div class="plan-footer">
                                        <a asp-page="Template" asp-route-planId="@item.PlanId" class="btn btn-dark btn-modern btn-outline rounded-0 py-2 px-4">@sharedResource["Buy"]</a>
                                    </div>
                                    
                                </div>
                            </div>
                        }
                        }
                    }
            
            </div>

        </div>
    }
}
