@page
@model iTech.Areas.Admin.Pages.Configurations.Users.IndexModel
@{
}

<div class="d-flex flex-column flex-column-fluid">
	<!--begin::Toolbar-->
	<div id="kt_app_toolbar" class="app-toolbar  py-3 py-lg-6 ">
		<!--begin::Toolbar container-->
		<div id="kt_app_toolbar_container" class="app-container  container-fluid d-flex flex-stack ">
			<!--begin::Page title-->
			<div data-kt-swapper="true" data-kt-swapper-mode="{default: 'prepend', lg: 'prepend'}" data-kt-swapper-parent="{default: '#kt_app_content_container', lg: '#kt_app_toolbar_container'}" class="page-title d-flex flex-column justify-content-center flex-wrap me-3 mb-5 mb-lg-0">
				<!--begin::Title-->
				<h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">
					@sharedResource["Users"]
				</h1>
				<!--end::Title-->
			</div>
			<!--end::Page title-->
			<!--begin::Action group-->
			@*<div class="d-flex align-items-center gap-2">
				<div class="d-flex align-items-center gap-2 gap-lg-3">
					<button type="button" class="btn btn-sm btn-light-primary" data-bs-toggle="modal" id="create-btn" data-bs-target="#AddModal">
						<i class="ki-duotone ki-plus fs-2"></i> @sharedResource["Add "]
					</button>
					<!--end::Primary button-->
				</div>
			</div>*@
			<!--end::Action group-->
		</div>
		<!--end::Toolbar container-->
	</div>
	<div id="kt_app_content" class="app-content  flex-column-fluid ">


		<!--begin::Content container-->
		<div id="kt_app_content_container" class="app-container  container-fluid ">

			<div class="card">
				      <div class="card-body">
					<table id="tblList" class="table table-striped table-row-bordered gy-5 gs-7 border rounded">
						<thead>
							<tr class="fw-bold fs-6 text-gray-800 px-7">
								<th>@sharedResource["Id"]</th>
								<th class="min-w-200px">@sharedResource["User Name"]</th>
								<th class="min-w-200px">@sharedResource["Email"]</th>
								@*<th >@sharedResource["User Sites Count"]</th>*@
								<th class="min-w-200px text-end rounded-end">@sharedResource["Actions"]</th>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
					
				</div>

			</div>

		</div>

	</div>
</div>


<script src="~/Other/lib/jquery/dist/jquery.min.js"></script>
<script>
	$(document).ready(function () {
		$("#tblList").DataTable({
			"proccessing": true,
			"serverSide": true,
			"ajax": {
				url: "/admin/Configurations/Users/Index",
				type: 'POST',
				headers: { 'XSRF-TOKEN': $('@Html.AntiForgeryToken()').val() }
			},
			"columnDefs": [
				{
					"targets": -1,
					"data": null,
					"render": function (data, type, row, meta) {
					
						const linkHtml = `<a href="/Admin/Configurations/Users/UserSites?id=${row.Id}" class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1">

												 <i class="ki-duotone ki-eye fs-2x">
																						<span class="path1"></span>
																				<span class="path2"></span>
																				<span class="path3"></span>
																				</i>
										</a>`;
						return linkHtml;
					},
					"sortable": false
				},
				{ "name": "Id", "data": "Id", "targets": 0, "visible": false },
				{ "name": "UserName", "data": "UserName", "targets": 1, "visible": true },
				{ "name": "Email", "data": "Email", "targets": 2 },
				//{ "name": "SitesCount", "data": "SitesCount", "targets": 3, "visible": true },
			],
			"order": [[1, "desc"]],
			"language": {
				"lengthMenu": "Show _MENU_",
			},
			"dom":
				"<'row'" +
				"<'col-sm-6 d-flex align-items-center justify-conten-start'l>" +
				"<'col-sm-6 d-flex align-items-center justify-content-end'f>" +
				">" +
				"<'table-responsive'tr>" +
				"<'row'" +
				"<'col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start'i>" +
				"<'col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end'p>" +
				">",
			"createdRow": function (row, data, dataIndex) {
				var tdElements = $(row).find('td');
				$(tdElements[tdElements.length - 1]).addClass('text-end');
			}
		});
	});

</script>